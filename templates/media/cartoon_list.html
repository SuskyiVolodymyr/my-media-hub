{% extends "base.html" %}
{% load query_transform %}
{% block content %}
  <h1>Cartoons</h1>
  <form method="get" action="">
    {{ search_form.as_p }}
    {{ order_form.as_p }}
    <details>
    <summary>Filter by Genre</summary>
    <div style="column-count: 5">
      {{ filter_form.as_p }}
    </div>
    </details>
    <input type="submit" value="🔍" class="btn btn-secondary">
  </form>
 <table>
  <tr>
    <th>
      Title
    </th>
    <th>
      Genres
    </th>
    <th>
      Seasons
    </th>
    <th>
      Episodes
    </th>
    <th>
      Year of release
    </th>
    <th>
      Add/Delete
    </th>
  </tr>
  {% if cartoon_list %}
    {% for cartoon in cartoon_list %}
      <tr>
        <th>
          <a href="{% url 'media:cartoon-detail' cartoon.id %}">{{ cartoon.title }}</a>
        </th>
        <th>
          {% for genre in cartoon.genre.all  %}
          {{ genre }}
          {% empty %}
          {% endfor %}
        </th>
        <th>
          {{ cartoon.seasons }}
        </th>
          <th>
          {{ cartoon.episodes }}
        </th>
        <th>
          {{ cartoon.year_released }}
        </th>
        <th>
          {% if cartoon in user.cartoons.all %}
            <a href="{% url 'media:cartoon-add' cartoon.id %}">Remove from list</a>
          {% else %}
            <a href="{% url 'media:cartoon-add' cartoon.id %}">Add to list</a>
          {% endif %}
        </th>
      </tr>
    {% endfor %}
  {% endif %}
  </table>
{% endblock %}
{% block content-after %}
  <h3><a href="{% url "media:cartoon-create" %}">Can't find cartoon? Click here to create new one</a></h3>
{% endblock %}
